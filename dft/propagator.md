This lecture note has been prepared following the [nptel video lectures](https://nptel.ac.in/courses/115103102) by Saurabh Basu titled [Advanced Condensed Matter Physics](https://archive.nptel.ac.in/content/syllabus_pdf/115103102.pdf) . If you notice any mistake, please let me know via muhaymin.ph@gmail.com or abdul.muhaymin@bilkent.edu.tr. 

It is the basis of many-body theory. Sometimes it is desirable to talk about a small set of interacting quasiparticles instead of large number of non-interacting electrons. This quasiparticle description fails when their creation time is much larger/smaller than their decay time, however.
## Basic QM
The mathematical arena in which QM works is Hilbert space (infinite-dimensional vector space). Single particle Hamiltonian, $\hat{H}_{1}$ whose eigenfunctions are given by $|\chi\rangle$ where $|\chi\rangle$ is given by $|\lambda\rangle$, a complete set of states (basis), and $|\lambda\rangle\langle\lambda|=\mathbb{1}$ .
$$\hat{H}_{1}|\chi\rangle = \varepsilon_{\lambda} |\lambda\rangle  $$
Examples: (1) Free particle: $$ \hat{H_1} = -\frac{\hbar^2}{2m}\nabla^2$$(2) Spin 1/2 particle in a magnetic field $B_z$, $$ \hat{H_1} = -B_z\sigma_z$$For many particle $(N)$ Hilbert space, in the case of above-mentioned examples, we have: $$ \hat{H} = \sum_{i=1}^{N} \frac{p_i^2}{2m}=\sum_{i=1}^{N} \hat{H}_i \quad \text{ and } \quad \hat{H} = -B_z\sum_{i=1}^{N}(\sigma_z)_i$$
## Propagators
In QM, we can find the wave function $\Psi(x,t)$ by solving time-dependent Schrodinger's equation (TDSE) which is: $$i\hbar\frac{\partial}{\partial t}\Psi(x,t)=\hat{H}\Psi(x,t)$$Now, we propose an ansatz for the solution of $\Psi(x,t)$ of the form: $$\Psi(x,t)=\sum_n c_n(t)\; u_n(x)$$where $u_n(x)$ is the basis function and $c_n(t) = c_n(0)e^{-iE_nt/\hbar}$, where $c_n(0)=\int \Psi(x,0)\;u_n^*(x) dx$. So,$$\begin{split}\Psi(x,t) & = \sum_n c_n(0) \; e^{-iE_nt/\hbar}\; u_n(x) \\ 
						& =\sum_n \left[\int \Psi(x',0) \; u_n^*(x') dx'\right] \; e^{-iE_nt/\hbar}\; u_n(x)\\
						& = \int G(x,x',t) \; \Psi(x',0) \; dx' \end{split}$$Here, $G(x,x',t)$ is the *Propagator* (it propagates the wave function from $x$ to $x'$). $$ \begin{align} G(x,x',t) &=\sum_n u_n(x)\,u_n^*(x')\; e^{-iE_nt/\hbar} \\
				\therefore G(x,x',t) &=\sum_n \langle u_n(x')|u_n(x)\rangle \; e^{-iE_nt/\hbar} \end{align} $$So, we can get the $\Psi(x,t)$ from either (1) by solving TDSE, or (2) by solving the propagator equation. 

Now, using the TDSE and the definition of the propagator, $$\left(i\hbar\frac{\partial}{\partial t}-\hat{H}\right)\Psi(x,t)=\int \left(i\hbar\frac{\partial}{\partial t}-\hat{H}\right)\,G(x,x',t)\;\Psi(x,0)\,dx'=0$$So, $$\left(i\hbar\frac{\partial}{\partial t}-\hat{H}\right)\,G(x,x',t)=0$$We want to talk about $t>0$, i.e., we are interested in the path where the system has actually been evolved. In this case, we define a *Retarded propagator* $G_R(x,x',t)$ such that $$ G_R(x,x',t) = G(x,x',t)\;\Theta(t)$$where $\Theta(t)$ is the Heaviside step function defined as follows: $$\Theta(t) = \left\{ \begin{align} 1 \quad\text{for }\quad t>0 \\0 \quad\text{for }\quad t<0 \end{align}\right\} $$That means $G_R$ makes a discontinuous jump from $t=0$ to a finite value. Now, $$ i\hbar \frac{\partial}{\partial t}G_R(x,x',t) = \Theta(t)\,i\hbar \frac{\partial}{\partial t}G(x,x',t) + i\hbar G(x,x',t) \frac{\partial}{\partial t}\Theta(t)$$ But $\frac{d}{dt}\Theta(t)=\delta(t)$. So, $$ i\hbar \frac{\partial}{\partial t}G_R(x,x',t) = \Theta(t)\;i\hbar \frac{\partial}{\partial t}G(x,x',t) + i\hbar G(x,x',t) \delta(t)$$Now by using TDSE for $G(x,x',t)$, we can write the TDSE for $G_R(x,x',t)$: $$ i\hbar\frac{\partial}{\partial t}G_R(x,x',t) = \Theta(t)\hat{H}G(x,x',t)+ i\hbar G(x,x',0)$$ $$\therefore \left(i\hbar\frac{\partial}{\partial t}-\hat{H}\right)\,G_R(x,x',t)= i\hbar\,\delta(x-x')\,\delta(t)$$This is the Schrodinger's equation for the retarded propagator. Now we will connect the retarded propagator to some physically meaningful variables such as the energy variable, $\omega \;(\because E=\hbar\omega)$. Also note that $\omega$ is the conjugate to $t$. Therefore, taking the Fourier transform of $G_R(x,x',t)$, $$ G_R(x,x',\omega) = \int_0^{\infty} G_R(x,x',t)\,e^{i\omega t} \,dt = \int_0^{\infty} \sum_n u_n(x)\,u_n^*(x')\;  e^{i(\hbar\omega -E_nt)/\hbar} \,dt \longrightarrow \;\text{which diverges}$$To remove the divergence, we will put a small damping factor +$\eta$ (we will explain the choice of $+$ sign later), and we get: $$ G_R(x,x',\omega) = -i\hbar\;\sum_n\frac{ u_n(x)\,u_n^*(x')}{\hbar\omega -E_nt+i\eta}\;   \longrightarrow \;\text{which converges at }\eta\rightarrow 0$$Just like we chose the variable $\omega$ here instead of $t$, one can also favor the momentum variables $k, k'$ instead of space variable $x,x'$. 
## Relationship between propagator and Green's function
The *Retarded Green's function* is related to $G_R$ by the following relation: $$ G_+(x,x',\omega)=\int_0^\omega G_R(x,x',t)\,e^{i(h\omega+i\eta)t}dt$$So, the Schrodinger's equation for the retarded Green's function is: $$ (\hat{H}-\hbar\omega-i\eta) \,G_+(x,x',\omega) =i\hbar\,\delta(x-x')$$Now, if we want to evaluate $G_+(x,x',t)$, we need to do an inverse Fourier transform of form: $$G_+(x,x',t)=\int_{-\infty}^{\infty}G_+(x,x',\omega)\,e^{-i\omega t}\,d\omega \longrightarrow \int_{-\infty}^{\infty}\frac{e^{-i\omega t}}{\hbar\omega-E_n+i\eta}\,d\omega$$So, $\omega$ can be treated as a complex variable and this integral can be evaluated using complex integration. There is a *pole* at $\omega=(E_n-i\eta)/\hbar$ .  So, this integration can be decomposed into two parts: $$\int_{-\infty}^{\infty} \rightarrow \oint_{\Gamma}-\int_{\Omega}$$ The $\oint_{\Gamma}$ can be found by the Cauchy's formula and $\int_{\Omega}$ vanishes according to Jordan's lemma. 

```tikz
\begin{document}
  \begin{tikzpicture}[scale=4]
    \draw[-latex] (-1,0) -- (1,0) node[right] {$+\infty$};
	\draw[-latex](1,0) to[out=-90,in=-90] (-1,0) node[left] {$-\infty$};
	\draw(0,-.4) node[below] {$\Gamma$}; 
	\draw(0,0) node[above] {$\Omega$};  
\end{tikzpicture}
\end{document}
```
So, $$\int_{-\infty}^{\infty}\frac{e^{-i\omega t}}{\hbar\omega-E_n+i\eta}\,d\omega = \left\{ \begin{align} &= 2\pi i\,e^{-i(E_n-i\eta)t/\hbar} \quad \text{for t > 0}\\ &=0 \quad \text{for t < 0}\end{align}\right\} \equiv I_n$$Therefore, $$ G_R(x,x',t) = \frac{1}{2\pi \hbar}\sum_n u_n(x) \,u_n^**(x) \,I_n$$Here, we used only $t>0$ and hence we got the retarded propagator and consequently the retarded Green's function. If we used a $-\eta$ instead of a $+\eta$ to remove the divergence, then we would end up with the advanced propagator $G_A$ or advanced Green's function, $G_-$. It will have the form: $$ G_A(x,x',t) = G(x,x',t)\,\Theta(-t)$$ 
## Example: Green's function for a free particle
For a free, non-relativistic particle, $$ E = \frac{p^2}{2m}=\frac{\hbar^2k^2}{2m}$$We can write the wave function using plane-wave basis sets as follows and we also convert it to momentum indices $$ u_n(x) = Ae^{ikx} = Ae^{ipx/\hbar} = u_p(x)$$So, due to orthogonality relation, we have:
$$ \int u_p(x) \,u_{p'}(x)= \delta (p-p')$$In terms of energy eigenstate, $$ u_e(x) = Ae^{\pm i\sqrt{2mE}x/\hbar}$$where the normalization factor $A=\left( \frac{m}{2E}\right)^{1/4} \frac{1}{\sqrt{2\pi \hbar}}$ and the orthogonality relation gives us: $$  \int u_E(x) \,u_{E'}(x)= \delta (E-E') $$Then the *retarded propagator* can be written as: $$ \begin{align} G(x,x',t)  &= \int dE \, u_E^*(x')\,u_E(x)\,e^{-iEt/\hbar} \\ &= \int dE\, \left( \frac{m}{2E}\right)^{1/2} \frac{1}{2\pi \hbar}e^{\pm i\sqrt{2mE}(x-x')/\hbar}\,e^{-iEt/\hbar}\end{align}$$This integral can be simplified using the substitution $$k=\frac{\sqrt{2mE}}{\hbar} \;\Rightarrow \; dk=\frac{\sqrt{2m}}{\hbar}\frac{1}{2\sqrt{E}}\,dE$$So, $$\begin{align} G(x,x',t) &= \frac{1}{2\pi}\int dk e^{ik(x-x')}\,e^{-i\hbar k^2 t/2m} \\ &= \sqrt{\frac{m}{2\pi i \hbar t}}\,e^{\frac{-m(x-x')^2}{2i\hbar t}} \end{align}$$
  and we can therefore find the wave function by evaluating the integral:
  $$ \Psi(x,t) = \int G(x,x',t)\,\Psi(x',0)\,dx'$$
## Introduction to Second Quantization
In QM, the formalism we saw is the so-called first quantization where observables were represented by operators and states are represented as functions. In the second quantization, observables are still represented by operators but the states are now represented by operators as well which are known as the creation $(a^\dagger)$ and annihilation $(a)$ operators. Beware that the name second quantization is a [misnomer](https://en.wikipedia.org/wiki/Second_quantization#Comment_on_nomenclature). 
Typical state in the second quantization formalism is made up from the vacuum state, $|0\rangle$ i.e.,  
$$ |\Psi\rangle = \prod_{m=1}^{N}\left(a^\dagger\right)^m\,|0\rangle \qquad \text{and} \qquad a|0\rangle=0$$Here, $a^\dagger$ and $a$ are Hermitian adjoint operators but not self-adjoint. [details](https://www.physicsforums.com/threads/hermitian-vs-self-adjoint-operators.259127/#:~:text=A%20Hermitian%20operator%20is%20a%20linear%20operator%20on%20a%20complex,equal%20to%20its%20own%20transpose) . 
Now, let us take a look
## Many-particle state
## Second Quantization
## Representation of 1-body operator
## Representation of 2-body operator
